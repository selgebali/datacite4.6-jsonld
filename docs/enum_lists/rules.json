{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://selgebali.github.io/datacite4.6-jsonld/datacite4.6-rules.json",
  "title": "DataCite Metadata Schema v4.6 – Validation Rules (API-aligned)",
  "description": "Validation profile for DataCite 4.6 JSON(-LD) records aligned to the REST API attributes (not the JSON:API envelope). Includes required fields, cardinalities, and controlled lists.",
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "doi": {
      "type": "string",
      "description": "The DOI assigned to the resource.",
      "pattern": "^10\\.[0-9]{4,}/[-._;()/:a-zA-Z0-9]+$"
    },

    "creators": {
      "type": "array",
      "minItems": 1,
      "description": "One or more creator objects in priority order.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "name": { "type": "string", "description": "Creator’s full name (Personal: Family, Given; Organizational: org name)." },
          "nameType": { "type": "string", "enum": ["Personal", "Organizational"] },
          "givenName": { "type": "string" },
          "familyName": { "type": "string" },
          "affiliation": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "name": { "type": "string" },
                "affiliationIdentifier": { "type": "string" },
                "affiliationIdentifierScheme": { "type": "string" },
                "schemeUri": { "type": "string", "format": "uri" }
              },
              "required": ["name"],
              "allOf": [
                { "if": { "required": ["affiliationIdentifier"] }, "then": { "required": ["affiliationIdentifierScheme"] } },
                { "if": { "properties": { "affiliationIdentifierScheme": { "const": "ROR" } }, "required": ["affiliationIdentifierScheme"] }, "then": { "properties": { "affiliationIdentifier": { "type": "string", "format": "uri" } } } }
              ]
            }
          },
          "nameIdentifiers": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "nameIdentifier": { "type": "string" },
                "nameIdentifierScheme": { "type": "string" },
                "schemeUri": { "type": "string", "format": "uri" }
              },
              "required": ["nameIdentifier", "nameIdentifierScheme"],
              "allOf": [
                { "if": { "properties": { "nameIdentifierScheme": { "const": "ORCID" } }, "required": ["nameIdentifierScheme"] }, "then": { "properties": { "nameIdentifier": { "anyOf": [ { "type": "string", "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$" }, { "type": "string", "format": "uri" } ] } } } },
                { "if": { "properties": { "nameIdentifierScheme": { "const": "ROR" } }, "required": ["nameIdentifierScheme"] }, "then": { "properties": { "nameIdentifier": { "type": "string", "format": "uri" } } } }
              ]
            }
          }
        },
        "required": ["name"],
        "allOf": [
          { "if": { "properties": { "nameType": { "const": "Organizational" } }, "required": ["nameType"] }, "then": { "not": { "anyOf": [ { "required": ["givenName"] }, { "required": ["familyName"] } ] } } }
        ]
      }
    },

    "titles": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "title": { "type": "string" },
          "titleType": { "type": "string", "enum": ["AlternativeTitle", "Subtitle", "TranslatedTitle", "Other"] },
          "lang": { "type": "string" }
        },
        "required": ["title"]
      }
    },

"publisher": {
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "name": { "type": "string" },
    "publisherIdentifier": { "type": "string" },
    "publisherIdentifierScheme": { "type": "string" },
    "schemeUri": { "type": "string", "format": "uri" },
    "lang": { "type": "string" }
  },
  "required": ["name"],
  "allOf": [
    { "if": { "required": ["publisherIdentifier"] }, "then": { "required": ["publisherIdentifierScheme"] } },
    { "if": { "properties": { "publisherIdentifierScheme": { "const": "ROR" } }, "required": ["publisherIdentifierScheme"] },
      "then": { "properties": { "publisherIdentifier": { "type": "string", "format": "uri" } } } }
  ]
},
    "publicationYear": {
      "description": "YYYY",
      "anyOf": [
        { "type": "string", "pattern": "^\\d{4}$" },
        { "type": "integer", "minimum": 0 }
      ]
    },

    "types": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "resourceType": { "type": "string" },
        "resourceTypeGeneral": {
          "type": "string",
          "enum": [
            "Audiovisual","Award","Book","BookChapter","Collection","ComputationalNotebook","ConferencePaper","ConferenceProceeding","DataPaper","Dataset","Dissertation","Event","Image","InteractiveResource","Instrument","Journal","JournalArticle","Model","OutputManagementPlan","PeerReview","PhysicalObject","Preprint","Project","Report","Service","Software","Sound","Standard","StudyRegistration","Text","Workflow","Other"
          ]
        }
      },
      "required": ["resourceTypeGeneral"]
    },

    "subjects": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "subject": { "type": "string" },
          "subjectScheme": { "type": "string" },
          "schemeUri": { "type": "string", "format": "uri" },
          "classificationCode": { "type": "string" },
          "lang": { "type": "string" }
        },
        "required": ["subject"]
      }
    },

    "contributors": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "name": { "type": "string" },
          "nameType": { "type": "string", "enum": ["Personal", "Organizational"] },
          "givenName": { "type": "string" },
          "familyName": { "type": "string" },
          "contributorType": { "type": "string", "enum": [
            "ContactPerson","DataCollector","DataCurator","DataManager","Distributor","Editor","HostingInstitution","Other","Producer","ProjectLeader","ProjectManager","ProjectMember","RegistrationAgency","RegistrationAuthority","RelatedPerson","ResearchGroup","RightsHolder","Researcher","Sponsor","Supervisor","Translator","WorkPackageLeader"
          ] },
          "affiliation": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "name": { "type": "string" },
                "affiliationIdentifier": { "type": "string" },
                "affiliationIdentifierScheme": { "type": "string" },
                "schemeUri": { "type": "string", "format": "uri" }
              },
              "required": ["name"],
              "allOf": [
                { "if": { "required": ["affiliationIdentifier"] }, "then": { "required": ["affiliationIdentifierScheme"] } },
                { "if": { "properties": { "affiliationIdentifierScheme": { "const": "ROR" } }, "required": ["affiliationIdentifierScheme"] }, "then": { "properties": { "affiliationIdentifier": { "type": "string", "format": "uri" } } } }
              ]
            }
          },
          "nameIdentifiers": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "nameIdentifier": { "type": "string" },
                "nameIdentifierScheme": { "type": "string" },
                "schemeUri": { "type": "string", "format": "uri" }
              },
              "required": ["nameIdentifier", "nameIdentifierScheme"],
              "allOf": [
                { "if": { "properties": { "nameIdentifierScheme": { "const": "ORCID" } }, "required": ["nameIdentifierScheme"] }, "then": { "properties": { "nameIdentifier": { "anyOf": [ { "type": "string", "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$" }, { "type": "string", "format": "uri" } ] } } } },
                { "if": { "properties": { "nameIdentifierScheme": { "const": "ROR" } }, "required": ["nameIdentifierScheme"] }, "then": { "properties": { "nameIdentifier": { "type": "string", "format": "uri" } } } }
              ]
            }
          }
        },
        "required": ["name", "contributorType"],
        "allOf": [
          { "if": { "properties": { "nameType": { "const": "Organizational" } }, "required": ["nameType"] }, "then": { "not": { "anyOf": [ { "required": ["givenName"] }, { "required": ["familyName"] } ] } } }
        ]
      }
    },

    "dates": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "date": { "type": "string" },
          "dateType": { "type": "string", "enum": ["Accepted","Available","Collected","Copyrighted","Coverage","Created","Issued","Other","Submitted","Updated","Valid","Withdrawn"] },
          "dateInformation": { "type": "string" }
        },
        "required": ["date", "dateType"]
      }
    },

    "language": { "type": "string", "description": "Primary language of the resource (IETF BCP 47)." },

    "alternateIdentifiers": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "alternateIdentifier": { "type": "string" },
          "alternateIdentifierType": { "type": "string" }
        },
        "required": ["alternateIdentifier", "alternateIdentifierType"]
      }
    },

    "relatedIdentifiers": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "relatedIdentifier": { "type": "string" },
          "resourceTypeGeneral": { "type": "string", "enum": [
            "Audiovisual","Award","Book","BookChapter","Collection","ComputationalNotebook","ConferencePaper","ConferenceProceeding","DataPaper","Dataset","Dissertation","Event","Image","InteractiveResource","Instrument","Journal","JournalArticle","Model","OutputManagementPlan","PeerReview","PhysicalObject","Preprint","Project","Report","Service","Software","Sound","Standard","StudyRegistration","Text","Workflow","Other"
          ] },
          "relatedIdentifierType": { "type": "string", "enum": [
            "ARK","arXiv","bibcode","CSTR","DOI","EAN13","EISSN","Handle","IGSN","ISBN","ISSN","ISTC","LISSN","LSID","PMID","PURL","RRID","UPC","URL","URN","w3id"
          ] },
          "relationType": { "type": "string", "enum": [
            "IsCitedBy","Cites","IsSupplementTo","IsSupplementedBy","IsContinuedBy","Continues","IsNewVersionOf","IsPreviousVersionOf","IsPartOf","HasPart","IsPublishedIn","IsReferencedBy","References","IsDocumentedBy","Documents","IsCompiledBy","Compiles","IsVariantFormOf","IsOriginalFormOf","IsIdenticalTo","HasMetadata","IsMetadataFor","Reviews","IsReviewedBy","IsDerivedFrom","IsSourceOf","Describes","IsDescribedBy","HasVersion","IsVersionOf","Requires","IsRequiredBy","Obsoletes","IsObsoletedBy","Collects","IsCollectedBy","HasTranslation","IsTranslationOf"
          ] },
          "relatedMetadataScheme": { "type": "string" },
          "schemeUri": { "type": "string", "format": "uri" },
          "schemeType": { "type": "string" }
        },
        "required": ["relatedIdentifier", "relatedIdentifierType", "relationType"]
      }
    },

    "sizes": { "type": "array", "items": { "type": "string" } },
    "formats": { "type": "array", "items": { "type": "string" } },
    "version": { "type": "string" },

    "rightsList": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "rights": { "type": "string" },
          "rightsUri": { "type": "string", "format": "uri" },
          "rightsIdentifier": { "type": "string" },
          "rightsIdentifierScheme": { "type": "string" },
          "schemeUri": { "type": "string", "format": "uri" },
          "lang": { "type": "string" }
        }
      }
    },

    "descriptions": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "description": { "type": "string" },
          "descriptionType": { "type": "string", "enum": ["Abstract","Methods","SeriesInformation","TableOfContents","TechnicalInfo","Other"] },
          "lang": { "type": "string" }
        },
        "required": ["description"]
      }
    },

    "geoLocations": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "geoLocationPlace": { "type": "string" },
          "geoLocationPoint": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "pointLongitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -180, "maximum": 180 },
              "pointLatitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -90, "maximum": 90 }
            },
            "required": ["pointLongitude", "pointLatitude"]
          },
          "geoLocationBox": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "westBoundLongitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -180, "maximum": 180 },
              "eastBoundLongitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -180, "maximum": 180 },
              "southBoundLatitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -90, "maximum": 90 },
              "northBoundLatitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -90, "maximum": 90 }
            },
            "required": ["westBoundLongitude", "eastBoundLongitude", "southBoundLatitude", "northBoundLatitude"]
          },
          "geoLocationPolygon": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "polygonPoint": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "pointLongitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -180, "maximum": 180 },
                    "pointLatitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -90, "maximum": 90 }
                  },
                  "required": ["pointLongitude", "pointLatitude"]
                },
                "inPolygonPoint": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "pointLongitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -180, "maximum": 180 },
                    "pointLatitude": { "oneOf": [ { "type": "number" }, { "type": "string", "pattern": "^-?\\d+(\\.\\d+)?$" } ], "minimum": -90, "maximum": 90 }
                  },
                  "required": ["pointLongitude", "pointLatitude"]
                }
              },
              "required": ["polygonPoint"]
            }
          }
        }
      }
    }
  },

  "required": [
    "doi",
    "creators",
    "titles",
    "publisher",
    "publicationYear",
    "types"
  ]
}
