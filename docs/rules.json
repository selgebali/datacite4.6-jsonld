{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://selgebali.github.io/datacite4.6-jsonld/main_context.jsonld",
  "title": "DataCite Metadata Schema v4.6",
  "description": "JSON Schema for validating DataCite 4.6 JSON-LD records against required fields and cardinalities.",
  "type": "object",

  "properties": {
    "identifier": {
      "type": "string",
      "format": "uri",
      "description": "A persistent identifier that identifies a resource."
    },
    "identifierType": {
      "type": "string",
      "description": "The scheme used for the identifier (e.g. DOI)."
    },

    "creators": {
      "type": "array",
      "minItems": 1,
      "description": "One or more creator objects in priority order.",
      "items": {
        "type": "object",
        "properties": {
          "creatorName": {
            "type": "string",
            "description": "Name of the creator (Family, Given)."
          },
          "nameType": {
            "type": "string",
            "enum": ["Personal","Organizational"],
            "description": "Personal vs. Organizational name."
          },
          "givenName": {
            "type": "string"
          },
          "familyName": {
            "type": "string"
          },
          "nameIdentifier": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            }
          },
          "affiliation": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["creatorName"],
        "additionalProperties": false
      }
    },

    "titles": {
      "type": "array",
      "minItems": 1,
      "description": "One or more title objects.",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "The title string."
          },
          "titleType": {
            "type": "string",
            "enum": ["AlternativeTitle","Subtitle","TranslatedTitle","Other"],
            "description": "Controlled list of subtitle/alternate types."
          },
          "lang": {
            "type": "string",
            "description": "IETF BCP 47 language code, e.g. 'en'."
          }
        },
        "required": ["title"],
        "additionalProperties": false
      }
    },

    "publisher": {
      "type": "object",
      "description": "Publisher of the resource, including identifier and language.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the entity that publishes the resource."
        },
        "publisherIdentifier": {
          "type": "string",
          "description": "Identifier for the publisher, e.g. an ROR ID."
        },
        "publisherIdentifierScheme": {
          "type": "string",
          "description": "Scheme of the publisher identifier, e.g. 'ROR'."
        },
        "schemeURI": {
          "type": "string",
          "format": "uri",
          "description": "URI of the identifier scheme."
        },
        "lang": {
          "type": "string",
          "description": "IETF BCP 47 language code for publisher name."
        }
      },
      "required": ["name"],
      "additionalProperties": false
    },

    "publicationYear": {
      "type": "string",
      "pattern": "^[0-9]{4}$",
      "description": "YYYY"
    },

    "resourceType": {
      "type": "string",
      "description": "Free-text description of the resource type."
    },
    "resourceTypeGeneral": {
      "type": "string",
      "enum": [
        "Audiovisual","Award","Book","BookChapter","Collection",
        "ComputationalNotebook","ConferencePaper","ConferenceProceeding",
        "DataPaper","Dataset","Dissertation","Event","Image",
        "InteractiveResource","Instrument","Journal","JournalArticle",
        "Model","OutputManagementPlan","PeerReview","PhysicalObject",
        "Preprint","Project","Report","Service","Software","Sound",
        "Standard","StudyRegistration","Text","Workflow","Other"
      ],
      "description": "Controlled list of general resource types."
    },
    "subjects": {
      "type": "array",
      "description": "Subject, keywords, classification codes, or key phrases describing the resource.",
      "items": {
        "type": "object",
        "properties": {
          "value": { "type": "string" },
          "subjectScheme": { "type": "string" },
          "schemeURI": { "type": "string", "format": "uri" },
          "valueURI": { "type": "string", "format": "uri" },
          "classificationCode": { "type": "string", "format": "uri" },
          "lang": { "type": "string" }
        },
        "required": ["value"],
        "additionalProperties": false
      }
    },
    "contributors": {
      "type": "array",
      "description": "The institution or person responsible for contributing to the resource.",
      "items": {
        "type": "object",
        "properties": {
          "contributorName": { "type": "string" },
          "nameType": { "type": "string", "enum": ["Personal","Organizational"] },
          "givenName": { "type": "string" },
          "familyName": { "type": "string" },
          "nameIdentifier": {
            "type": "array",
            "items": { "type": "string", "format": "uri" }
          },
          "affiliation": {
            "type": "array",
            "items": { "type": "string" }
          },
          "contributorType": { "type": "string" }
        },
        "required": ["contributorName","contributorType"],
        "additionalProperties": false
      }
    },
    "dates": {
      "type": "array",
      "description": "Different dates relevant to the work.",
      "items": {
        "type": "object",
        "properties": {
          "date": { "type": "string" },
          "dateType": { "type": "string" },
          "dateInformation": { "type": "string" }
        },
        "required": ["date","dateType"],
        "additionalProperties": false
      }
    },
    "language": {
      "type": "string",
      "description": "Primary language of the resource. IETF BCP 47 code."
    },
    "alternateIdentifiers": {
      "type": "array",
      "description": "Identifiers other than the primary Identifier.",
      "items": {
        "type": "object",
        "properties": {
          "value": { "type": "string" },
          "alternateIdentifierType": { "type": "string" }
        },
        "required": ["value","alternateIdentifierType"],
        "additionalProperties": false
      }
    },
    "relatedIdentifiers": {
      "type": "array",
      "description": "Identifiers of related resources.",
      "items": {
        "type": "object",
        "properties": {
          "value": { "type": "string" },
          "resourceTypeGeneral": { "type": "string" },
          "relatedIdentifierType": { "type": "string" },
          "relationType": { "type": "string" },
          "relatedMetadataScheme": { "type": "string" },
          "schemeURI": { "type": "string", "format": "uri" },
          "schemeType": { "type": "string" }
        },
        "required": ["value","relatedIdentifierType","relationType"],
        "additionalProperties": false
      }
    },
    "sizes": {
      "type": "array",
      "description": "Unstructured size information about the resource.",
      "items": { "type": "string" }
    },
    "formats": {
      "type": "array",
      "description": "Technical formats of the resource.",
      "items": { "type": "string" }
    },
    "version": {
      "type": "string",
      "description": "Version number of the resource."
    }
  },
  "relatedItems": {
  "type": "array",
  "description": "Information about a resource related to the one being registered.",
  "items": {
    "type": "object",
    "properties": {
      "relatedItemType": { "$ref": "#/$defs/resourceTypeGeneral/enumSchema" },
      "relationType":    { "$ref": "#/$defs/relationType/enumSchema" },
      "relatedItemIdentifier": {
        "type": "object",
        "properties": {
          "value":  { "type": "string" },
          "relatedItemIdentifierType": { "$ref": "#/$defs/relatedIdentifierType/enumSchema" },
          "relatedMetadataScheme": { "type": "string" },
          "schemeUri": { "type": "string", "format": "uri" },
          "schemeType": { "type": "string" }
        },
        "required": ["value", "relatedItemIdentifierType"],
        "additionalProperties": false
      },
      "creator": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "creatorName": { "type": "string" },
            "nameType":    { "$ref": "#/$defs/nameType/enumSchema" },
            "givenName":   { "type": "string" },
            "familyName":  { "type": "string" },
            "nameIdentifier": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {"nameIdentifier": {
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "nameIdentifier": { "type": "string" },
      "nameIdentifierScheme": { "type": "string" },
      "schemeUri": { "type": "string", "format": "uri" }
    },
    "required": ["nameIdentifier", "nameIdentifierScheme"],
    "additionalProperties": false
  }
},
"affiliation": {
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "name": { "type": "string" },
      "affiliationIdentifier": { "type": "string" },
      "affiliationIdentifierScheme": { "type": "string" },
      "schemeUri": { "type": "string", "format": "uri" }
    },
    "required": ["name"],
    "additionalProperties": false
  }
}
            }
          },
          "required": ["creatorName"],
          "additionalProperties": false
        }
      },
      "title": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "titleType": { "$ref": "#/$defs/titleType/enumSchema" },
            "lang": { "type": "string" }
          },
          "required": ["title"],
          "additionalProperties": false
        }
      },
      "publicationYear": { "type": "string", "pattern": "^[0-9]{4}$" },
      "volume": { "type": "string" },
      "issue": { "type": "string" },
      "number": { "type": "string" },
      "firstPage": { "type": "string" },
      "lastPage":  { "type": "string" },
      "publisher": { "type": "string" },
      "edition":   { "type": "string" },
      "contributor": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "contributorName": { "type": "string" },
            "contributorType": { "$ref": "#/$defs/contributorType/enumSchema" },
            "nameType":        { "$ref": "#/$defs/nameType/enumSchema" },
            "givenName":       { "type": "string" },
            "familyName":      { "type": "string" },
            "nameIdentifier": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "nameIdentifier": { "type": "string" },
                  "nameIdentifierScheme": { "type": "string" },
                  "schemeUri": { "type": "string", "format": "uri" }
                },
                "required": ["nameIdentifier", "nameIdentifierScheme"],
                "additionalProperties": false
              }
            },
            "affiliation": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "affiliationIdentifier": { "type": "string" },
                  "affiliationIdentifierScheme": { "type": "string" },
                  "schemeUri": { "type": "string", "format": "uri" }
                },
                "required": ["name"],
                "additionalProperties": false
              }
            }
          },
          "required": ["contributorName", "contributorType"],
          "additionalProperties": false
        }
      }
    },
    "required": ["relatedItemType", "relationType"],
    "additionalProperties": false
  }
},

  "required": [
    "identifier",
    "identifierType",
    "creators",
    "titles",
    "publisher",
    "publicationYear",
    "resourceType",
    "resourceTypeGeneral"
  ],

  "additionalProperties": false
}
